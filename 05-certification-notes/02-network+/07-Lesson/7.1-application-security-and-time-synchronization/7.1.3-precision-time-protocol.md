## 7.1.2 ‚Äì Network Time Protocol (NTP)
#networking-plus

### ‚úÖ Purpose of NTP
- Ensures all network devices share **synchronized time**.
- Critical for:
  - Authentication & security tokens
  - Log correlation & auditing
  - Scheduled backups
  - Time-sensitive applications

### üß± How It Works
- **Protocol:** NTP (Network Time Protocol)
- **Port:** UDP 123
- **Function:** Syncs system time with accurate external or internal time sources.

---

### üß± NTP Stratum Levels
- **Stratum 0:** Not a device ‚Äì atomic clock, GPS, or radio time source.
- **Stratum 1:** Directly connected to stratum 0 (most accurate time server).
- **Stratum 2:** Syncs time from a stratum 1 server over a network.
- Lower stratum = more accurate; each level is one hop further from the time source.

---

### üîç Client Configuration
- Hosts (PCs, servers, routers) sync time using NTP or **SNTP**:
  - **SNTP (Simple NTP):** Lighter version, can't act as a time server.
  - Same port as NTP (UDP 123).
- Configure using:
  - Windows: `w32tm` command
  - Linux: `/etc/ntp.conf`

---

### üß† Time Drift Correction Methods
- **Slew method:**
  - Gradual correction over milliseconds
  - Safer for apps, avoids sudden jumps
- **Slam method:**
  - Hard reset of time
  - Risky for sensitive applications

---

### ‚ùå Time Sync Failure Effects
- Authentication may fail
- Logs out of order
- Services may break (e.g., Kerberos, VPNs)
- Invalid tokens or failed session handshakes

---

### ‚úÖ NTS ‚Äì Network Time Security
- Secures NTP using **TLS encryption**
- Prevents spoofing, manipulation
- **Port:** TCP 4460 (or 3443, 4443 in earlier drafts)
- Called **NTS-KE** (Key Exchange over TLS)

---

### üß† Public NTP Pool Examples
- `time.google.com`
- `time.windows.com`
- `time.apple.com`

---

### üß± Best Practices
- At least **three NTP servers** for redundancy
- Use internal NTP when possible
- Allow drift detection and auto-correction

