## 6.5.3 – Name Resolution Using DNS

- The name resolution process begins when a user enters an FQDN (e.g., `www.515web.net`) into an application like a web browser.
- The **client application** (called a *stub resolver*) checks its **local cache**.
  - ✅ If there's a cached IP address, it's used immediately.
  - ❌ If not, the query is forwarded to a **local name server**.

### 🧱 DNS Resolution Steps

1. **Client** queries `www.515web.net`.
2. **Local name server** checks its cache:
   - Not authoritative.
   - Sends recursive query to a **root name server**.
3. **Root name server** returns address of `.net` TLD server.
4. **TLD server (.net)** returns address of `515web.net` name server.
5. **Authoritative server (515web.net)** returns IP address for `www.515web.net`.
6. **Local name server** caches the result and returns IP to client.
7. **Client** receives and caches IP.

---

### 🧱 Two Types of DNS Queries

- **Iterative Lookup** 🔍  
  The name server responds with:
  - The answer (if authoritative), or  
  - A referral to another server closer to the answer.

- **Recursive Lookup** 🧱  
  The name server **takes full responsibility** for resolving the query.
  - Queries other servers until the answer is found or times out.
  - This is the default behavior for local DNS resolvers.

---

### ⚙️ DNS Server Roles

- Some DNS servers:
  - Only perform **recursive queries** (resolvers).
  - Maintain **zone records** (authoritative data).
- Most Internet DNS servers **do not allow recursive queries** from unknown sources.
- **Recursive resolvers** are typically restricted to authorized clients (e.g., ISP customers or enterprise machines).

---

✅ Summary:
- Name resolution uses both **local cache** and **hierarchical queries**.
- FQDNs resolve from the **root** down to the **authoritative** server.
- DNS caching improves performance and reduces traffic.

---
## 6.5.3 – Name Resolution Using DNS  
#networking-plus

### 🧠 DNS Resolution Basics
When a client needs to resolve a Fully Qualified Domain Name (FQDN) like `www.515web.net`, it begins by checking:
- Its **local DNS cache**
- Then it sends the query to a **local DNS resolver** (configured in TCP/IP settings)

If the resolver doesn't have the answer cached, it must **ask around** — and *how* it asks depends on the type of lookup:

---

### 🔁 Iterative Lookup

> "I don't know the answer, but I know someone who might."

- Used **between DNS servers**
- Each DNS server replies with the **next server to ask**, not the final answer
- The **client’s local resolver** must chase down the answer by itself

🧱 Step-by-step:
1. Client asks its local DNS server
2. Local DNS server asks **root** → gets referral to `.net` server
3. Asks `.net` → gets referral to `515web.net` server
4. Asks `515web.net` authoritative server → gets the final IP

Each server just *points the way*, it doesn’t go find the answer for you.

---

### 🔄 Recursive Lookup

> "Let me handle everything — I’ll get back to you when I find it."

- Used **between client and its DNS resolver**
- Client asks its local resolver, and the resolver does **all the work**
- It performs iterative lookups behind the scenes, then returns the result

🧱 Step-by-step:
1. Client asks local DNS server for `www.515web.net`
2. Local DNS server does the iterative steps (root → TLD → authoritative)
3. Final answer is returned to the client

📦 The result is **cached** by the resolver for future use.

---

### 🧩 Key Differences

| Feature               | Recursive Lookup                | Iterative Lookup               |
|-----------------------|----------------------------------|---------------------------------|
| Who does the work?    | Resolver                        | Resolver asks others, follows trail |
| Client involvement    | Just asks once                  | Resolver handles chain         |
| DNS server behavior   | Queries until answer is found   | Replies with referral          |
| Performance impact    | Heavier load on resolver        | Lighter on each DNS server     |

---

### 📝 Analogy

Think of recursive as asking a librarian:  
> "Can you find this book for me?" — and she searches all floors until she hands it to you.

Iterative is like:
> "Can you tell me which floor to check?" — and you have to keep asking someone on each floor until you find it.

---

### ✅ Final Result

Once the resolver has the answer:
- It caches it for speed
- It sends the IP to the client
- The client connects directly to that IP

---

## 🔁 Who Uses Iterative vs Recursive DNS Lookups?
#networking-plus

### ✅ Recursive Lookup — **Used by clients**
- Client (browser or OS) asks DNS resolver for full answer
- Resolver does *all the work*
- Client waits until final IP is returned

🖥️ **Examples:**
- Your PC
- Your phone
- Your web browser
- IoT devices

---

### 🔁 Iterative Lookup — **Used by DNS servers**
- Resolver asks root → TLD → authoritative in steps
- Each server responds with a **referral**, not the final answer
- Resolver “follows the trail” to find the answer

🧱 **Examples:**
- Root DNS servers
- TLD servers (`.com`, `.net`, etc.)
- Authoritative DNS servers for domains
- Public resolvers (e.g. Google `8.8.8.8`, Cloudflare `1.1.1.1`)

---

### 🧩 Analogy:

> You (the client) say:  
> "Just tell me the IP for `www.example.com` — I don’t care how."

Your DNS resolver replies:
> "Okay, I’ll go ask around."

Then the resolver does:
- Iterative query to Root: “Where’s `.com`?”
- Iterative query to `.com`: “Where’s `example.com`?”
- Iterative query to `example.com`: “What’s the IP for `www`?”

Then it comes back and hands you the final answer.

---

